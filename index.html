<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>HunnyPotr by Recce7 by RECCE7</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">HunnyPotr by Recce7</h1>
      <h2 class="project-tagline">Technical Documentation For The Easily Extensible Honey Pot</h2>
    </section>

    <section class="main-content">
      <h1>
<a id="purpose-of-project" class="anchor" href="#purpose-of-project" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Purpose of Project</h1>

<<<<<<< HEAD
<p>Create an easy-install honey pot that any Security Engineer or Systems Administrator can easily write custom plugins for applications or services running on their network.  The honey pot needs to display critical data to the user in an easy to read and navigate format.  This tool is useful to show what kind of attacks are going on and verify that the actual services are guarded appropriately.</p>
=======
<p>Create an easy-install honey pot that any Security Engineer or Systems Administrator can write plugins that mimic applications or services running on their network.  The honey pot needs to display critical data to the user in an easy to read and navigate format.  This tool is useful to show what kind of attacks are going on and verify that the actual services the plugins represent are guarded appropriately.</p>
>>>>>>> 7ede1950fd0717961259de3cf918843eb10e5c3f

<h1>
<a id="features-and-libraries-used" class="anchor" href="#features-and-libraries-used" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features and Libraries Used</h1>

<h3>
<a id="designed-to-run-on-raspberrypi-zero" class="anchor" href="#designed-to-run-on-raspberrypi-zero" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Designed to Run on <a href="https://www.raspberrypi.org/products/pi-zero/">RaspberryPi Zero</a>
</h3>

<p>Application built around running on a RaspberryPi Zero to make it easy to deploy in any physical environment as well as being cost efficient.  Packages for both <a href="https://www.debian.org/">Debian</a> and <a href="https://www.centos.org/">CentOS</a> available to increase flexibility for users.</p>

<h3>
<a id="displaying-reporting-data-with-grafana" class="anchor" href="#displaying-reporting-data-with-grafana" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Displaying Reporting Data with <a href="http://grafana.org/">Grafana</a>
</h3>

<p>HoneyPotR will come packaged with some basic graphs and output configured by default. This allows any user to get up and running with HoneyPotR quickly by providing pre-built graphs so that information can be displayed for real-time attacks immediately.  Grafana also makes it very easy to build your own graphs in order to display any metrics that fit your needs.
<img src="recce7.github.io/images/grafana1.png" alt="">
<img src="recce7.github.io/images/grafana2.png" alt=""></p>

<h3>
<a id="using-docker-for-builds-and-ci-management" class="anchor" href="#using-docker-for-builds-and-ci-management" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using <a href="https://www.docker.com/">Docker</a> for Builds and CI Management</h3>

<p>Docker makes it easy to develop, test, build and manage a Continuous Integration development cycle.  By using Docker we have given our clients the ability to run HoneyPotR on any platform.  If running a Raspberry Pi does no fit your needs, Docker allows you to run our Debian and CentOS packages on any system such as Microsoft and Apple OS X.  Docker can also be used to deploy Grafana on a machine other than the Raspberry Pi.</p>

<h3>
<a id="passive-os-fingerprinting-with-p0f" class="anchor" href="#passive-os-fingerprinting-with-p0f" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Passive OS Fingerprinting with <a href="http://lcamtuf.coredump.cx/p0f3/">P0f</a>
</h3>

<p>By passively listening to the TCP Handshake between our honey pot and the attacker we are able to pull the following data:</p>

<ul>
<li>Time that the attacker connected and disconnected</li>
<li>Amount of connections the attacker currently has on HoneyPotR</li>
<li>Detected remote Operating System, version and accuracy estimated system</li>
<li>HTTP Client if available, i.e. browser, version and user agent; curl version; wget version</li>
<li>Network Link</li>
<li>Distance, amount of hops made to reach HoneyPotR</li>
<li>Language</li>
<li>Uptime</li>
</ul>

<h3>
<a id="geoip" class="anchor" href="#geoip" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Geoip</h3>

<p>Using a simple cURL call to <a href="http://ipinfo.io">ipinfo.io</a> we are able to gather useful information regarding the location of the attacker and the type of service they may be using.  We are then mapping the information from this call to a world map that is able to display the location of all attacks made on HoneyPotR.  This world map is accessible via an endpoint in HoneyPotR's REST API so that a user is able to pass a days GET parameter to narrow down the amount of points showing on the map.</p>

<h3>
<a id="rest-api" class="anchor" href="#rest-api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>REST API</h3>

<p>Users will have access to reporting data through a RESTful API.  Attack data resources are represented as JSON Arrays which makes it easy to narrow down and display exactly what information a user may want to access using HTTP GET calls.  This API allows flexibility for our clients to get reporting data however fits best for their environment.  For example if a client already had a GUI for reporting traffic on their network it would be easy for them to make calls to HoneyPotR via the REST API without the need to use Grafana.</p>

<h1>
<a id="how-it-works" class="anchor" href="#how-it-works" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How It Works</h1>

<h3>
<a id="framework" class="anchor" href="#framework" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Framework</h3>

<p>The framework class is responsible for managing the flow of information throughout the system.  Once the application is started the framework will initiate a <em>NetworkListener</em> that will attempt to complete the TCP handshake of any SYN packets that are addressed to the machine HoneyPotR is running on.  Once this handshake is complete, the framework is able to determine which plugin is being called based on the port number set in the configuration.  As the plugin is running and recording data, it is being passed back down to the framework which then passes it on to the <em>DataManager</em>.</p>

<p>The framework is also responsible for handling the multi-threaded nature of our application, the safe and graceful shutdown of the application and all current connections.  Multiple threads are needed to ensure that each running plugin is able to handle connections from multiple attackers at once while being able to simultaneously write the data that is being collected from the malicious actor.  It is also imperative that HoneyPotR is able to gracefully close all running connections so that no data is lost before it is written.  In the case that the application is compromised we need to shutdown gracefully so that we can end the threat without losing data collected up to that point.</p>

<h3>
<a id="plugins" class="anchor" href="#plugins" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Plugins</h3>

<p>Each plugin should be developed to match services running in production as closely as possible.  HoneyPotR comes with Telnet and HTTP servers by default.  Both include interfaces in which the attacker can interact with that will record all of the attackers commands.  By including these plugins we give our users an example of how to develop their own services, as well as the ability to collect data while developing their own.</p>

<p>The default plugins are also able to handle scans from popular network scanners such as <a href="https://nmap.org">Nmap</a>.  It is common for attacks to start with scans so that the hacker will have an understanding of what services are running on the network.  The ability to capture and record these scans will give us an idea of what kind of information the attacker is looking to gain before going active with his attack.</p>

<h3>
<a id="data-management" class="anchor" href="#data-management" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Data Management</h3>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

<h3>
<a id="data-reporting" class="anchor" href="#data-reporting" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Data Reporting</h3>

<p>As mentioned in the features section we provide a REST API to allow users to integrate data from our reporting server to their own user interface systems.</p>

<h4>
<a id="setup-restful-report-server" class="anchor" href="#setup-restful-report-server" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setup RESTful Report Server</h4>

<ul>
<li>Navigate to the directory where HoneyPotR was installed</li>
<li>Edit the <code>global.cfg</code> file located in <code>./config/</code> so that the Database <code>path</code> points to where the database is installed, note the example below:</li>
</ul>

<pre><code>[Database]
path = honeyDB/honeyDB.sqlite
datetime.name = eventDateTime
peerAddress.name = peerAddress
localAddress.name = localAddress
</code></pre>

<ul>
<li>Locate the ReportServer section and edit properties to fit your needs, note the example below:</li>
</ul>

<pre><code>[ReportServer]
reportserver.logName = reportserver.log
reportserver.logLevel = DEBUG
reportserver.host = 192.168.1.16
reportserver.port = 8080
</code></pre>

<ul>
<li>To start the report server navigate back to the installed directory and run <code>sudo ./startReportingServer.sh</code>
</li>
</ul>

<p>If the user decides that Grafan fits their needs they are able to use the default boards that come standard with HoneyPotR, or create their own.</p>

<h4>
<a id="setup-grafan-reporting-graphs-and-boards" class="anchor" href="#setup-grafan-reporting-graphs-and-boards" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setup Grafan Reporting Graphs and Boards</h4>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

<h1>
<a id="how-to-install-and-run-hunnypotr" class="anchor" href="#how-to-install-and-run-hunnypotr" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to Install and Run HunnyPotR</h1>

<p><strong><em>Installing by RPM or are we just using git clone and manually setting environment up, then running authbind.sh</em></strong></p>

<h1>
<a id="instructions-for-developing-plugins" class="anchor" href="#instructions-for-developing-plugins" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Instructions for Developing Plugins</h1>

<h3>
<a id="config-file-entries" class="anchor" href="#config-file-entries" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Config File Entries</h3>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

<h3>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>API</h3>

<p>Plugins will need to interact with our <em>BasePlugin</em> so that the data can be inserted properly into the database.  There are two methods that plugins must implement.</p>

<h4>
<a id="do_trackself" class="anchor" href="#do_trackself" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>do_track(self):</h4>

<p>Do track will hold all of the logic in the plugin that tracks what a user is doing and stores that information in local data structures that follow the data formatting that is described above.  This will differ for each service that is made into a plugin.  For example we would not expect to see the same kind of attacks hitting a MySQL server as we would for an Apache Web Server.</p>

<h4>
<a id="get_sessionself" class="anchor" href="#get_sessionself" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>get_session(self):</h4>

<p>This method allows HoneyPotR to group attacks into sessions based on when an attacker connects until they disconnect.  The reason that this is not handled in the BasePlugin is that some services natively allow session tracking.  An HTTP server may use cookies or HTTP Headers for tracking sessions while for Telnet we needed to implement a UUID for this.</p>

<h2>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authors and Contributors</h2>

<p>Matt <a href="https://github.com/howard-roark" class="user-mention">@howard-roark</a>, Dina <a href="https://github.com/dsteeve" class="user-mention">@dsteeve</a>, Charlie <a href="https://github.com/belmontrevenge" class="user-mention">@belmontrevenge</a>, Ben <a href="https://github.com/benphillips989" class="user-mention">@benphillips989</a>, Jesse <a href="https://github.com/jnels124" class="user-mention">@jnels124</a>, Randy  <a href="https://github.com/rsoren514" class="user-mention">@rsoren514</a>, Zach
<a href="https://github.com/zkuhns" class="user-mention">@zkuhns</a></p>

<h2>
<a id="support-or-contact" class="anchor" href="#support-or-contact" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Support or Contact</h2>

<p>Have questions or need support? Please contact any of the above contributors at their GitHub pages.</p>

      <footer class="site-footer">

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
